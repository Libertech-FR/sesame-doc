import{_ as e,c as s,o as n,a}from"./app-BT-ip7-8.js";const i={},l=a(`<h1 id="backend-ldap" tabindex="-1"><a class="header-anchor" href="#backend-ldap"><span>Backend LDAP</span></a></h1><p>télechargez le paquet debian (.deb) avec ce lien</p><p><a href="https://github.com/Libertech-FR/sesame-backend-ldap/releases/" target="_blank" rel="noopener noreferrer">https://github.com/Libertech-FR/sesame-backend-ldap/releases</a></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line"># dpkg -i sesame-backend-openldap_0.0.3_amd64.deb </span>
<span class="line">Sélection du paquet sesame-backend-openldap précédemment désélectionné.</span>
<span class="line">(Lecture de la base de données... 37052 fichiers et répertoires déjà installés.)</span>
<span class="line">Préparation du dépaquetage de sesame-backend-openldap_0.0.3_amd64.deb ...</span>
<span class="line">Dépaquetage de sesame-backend-openldap (0.0.3) ...</span>
<span class="line">dpkg: des problèmes de dépendances empêchent la configuration de sesame-backend-openldap :</span>
<span class="line"> sesame-backend-openldap dépend de libnet-ldap-perl; cependant :</span>
<span class="line">  Le paquet libnet-ldap-perl n&#39;est pas installé.</span>
<span class="line"> sesame-backend-openldap dépend de libjson-perl; cependant :</span>
<span class="line">  Le paquet libjson-perl n&#39;est pas installé.</span>
<span class="line"></span>
<span class="line">dpkg: erreur de traitement du paquet sesame-backend-openldap (--install) :</span>
<span class="line"> problèmes de dépendances - laissé non configuré</span>
<span class="line">Des erreurs ont été rencontrées pendant l&#39;exécution :</span>
<span class="line"> sesame-backend-openldap</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ces erreurs sont normales car dpkg n&#39;installe pas les dépendance tout seul.</p><p>Installez les dépendances :</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">#apt-get -f install</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="configuration-du-backend-ldap" tabindex="-1"><a class="header-anchor" href="#configuration-du-backend-ldap"><span>Configuration du backend LDAP</span></a></h2><p>Une fois l&#39;installation du paquets vous devez activer le backend.</p><p>Vous pouvez activer plusieurs fois le backendn si par exemple vous avez 2 serveurs Ldap differents pour les populations.</p><p>Allez dans /var/lib/sesame-daemon/backends-modules/openldap</p><p>Lancer ./install.sh</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">Deploiment du module LDAP</span>
<span class="line">La position determinera l&#39;ordre d&#39;execution des backends (comme dans init.d)</span>
<span class="line">Numero de demarrage du module (2 positions):02</span>
<span class="line">installation dans backends/02openldap</span>
<span class="line">Copie des fichiers dans ../../backends/02openldap</span>
<span class="line">Le backend a été installé dans ../../backends/02openldap</span>
<span class="line">Configuration</span>
<span class="line">Url du serveur ldap (ldap[s]://FDQN:PORT : ldaps://myldap.mydomain.com</span>
<span class="line">Dn d&#39;authentification (doit avoir les droits d&#39;ecriture) : cn=manager,cn=internal,dc=mydomain,dc=com</span>
<span class="line">Mot de passe : MonPassword!</span>
<span class="line">Base ldap : dc=mydomain,dc=com</span>
<span class="line">Branche pour les utilisateurs ex: ou=peoples : ou=peoples</span>
<span class="line">Attribut pour le Rdn : uid</span>
<span class="line">Génération du fichier de configuration</span>
<span class="line">Vous pouvez completer le fichier de configuration avec les parametres optionnels (voir README.md)</span>
<span class="line">Merci </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Le script va génerer l&#39;architecture dans backends et creer le fichier de configuration</p><h3 id="config-conf" tabindex="-1"><a class="header-anchor" href="#config-conf"><span>config.conf :</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">#paramètres positionnés par l&#39;installation</span>
<span class="line">host=myldap.mydomain.com</span>
<span class="line">dn=cn=manager,cn=internal,dc=mydomain,dc=com</span>
<span class="line">password=MyPassword</span>
<span class="line">base=dc=mydomain,dc=com</span>
<span class="line">userbase=ou=peoples,dc=mydomain,dc=com</span>
<span class="line">rdnattribute=uid</span>
<span class="line"># Parametres facultatifs </span>
<span class="line">excludedObjectclasses=objeclass1,objectclass2</span>
<span class="line">branchForEtd=ou=Etudiants</span>
<span class="line">branchForAdm=ou=Administratifs</span>
<span class="line">branchForEsn=ou=Enseignants</span>
<span class="line">branchAttr=supannTypeEntiteAffectation</span>
<span class="line">backendFor=adm,etd,esn</span>
<span class="line">disabledAttribute=sogxdisableflag</span>
<span class="line">disableValue=1</span>
<span class="line">enableValue=0</span>
<span class="line">additionnalObjectClass=sogxUser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="les-parametres-positionnes-par-le-script-install-sh" tabindex="-1"><a class="header-anchor" href="#les-parametres-positionnes-par-le-script-install-sh"><span>Les paramètres positionnés par le script install.sh</span></a></h3><ul><li>host : addresse de votre serveur ldap sous la forme simple ou en URL (ldap://monserveur:389 ou ldaps://monserveur:636)</li><li>dn : le dn de connexion (il doit avoir les droits d&#39;écriture sur les branches )</li><li>password : mot de passe du DN ci dessus</li><li>base : votre base LDAP</li><li>userbase : la branche dans laquelle seront créés les comptes</li></ul><h3 id="les-parammetres-supplementaires" tabindex="-1"><a class="header-anchor" href="#les-parammetres-supplementaires"><span>Les parammètres supplémentaires</span></a></h3><ul><li>rdnattribute : l&#39;attribut qui servira à la composition du DN</li><li>branchForEtd : la sous branche (dans userbase) pour les étudiants. Si ce paramètre est vide les identitées seront créées directememt dans <strong>userbase</strong></li><li>branchForAdm : idem pour les administratifs</li><li>branchForEsn : idem pour les enseignants</li><li>branchAttr : l&#39;attribut qui sert à determiner dans quelle branche l&#39;identité est crée.</li><li>backendFor : liste des types d&#39;identités gérée par le backend ex : adm,esn,etd</li><li>excludedObjectclasses : listes de objectclasses qui ne seront pas écrits dans le serveur LDAP</li><li>disabledAttribute : Attribut utilisé pour desactiver le compte</li><li>disableValue : La valeur de <strong>disabledAttribute</strong> pour desactiver le compte</li><li>enableValue : la valeur de <strong>disabledAttribute</strong> quand le compte est actif</li><li>additionnalObjectClass : l&#39;objectclass pour <strong>disabledAttribute</strong></li></ul><h4 id="composition-du-dn" tabindex="-1"><a class="header-anchor" href="#composition-du-dn"><span>Composition du DN</span></a></h4><p>Vous pouvez composer le DN avec un template dans la variable <strong>dnTemplate</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">dnTemplate=cn={{ e.cn }},{{branch}},{{config.base}}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>vous disposez comme dans les templates des variable</p><ul><li><strong>e</strong> contient les champs de l&#39;identité</li><li><strong>config</strong> contient la configuration</li><li><strong>branch</strong> contient la branche contenue dans la variable branchForXXX</li><li><strong>rdnValue</strong> contient la valeur du rdn</li></ul>`,25),d=[l];function t(r,c){return n(),s("div",null,d)}const o=e(i,[["render",t],["__file","backend_LDAP.html.vue"]]),u=JSON.parse('{"path":"/backends/backend_LDAP.html","title":"Backend LDAP","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Configuration du backend LDAP","slug":"configuration-du-backend-ldap","link":"#configuration-du-backend-ldap","children":[{"level":3,"title":"config.conf :","slug":"config-conf","link":"#config-conf","children":[]},{"level":3,"title":"Les paramètres positionnés par le script install.sh","slug":"les-parametres-positionnes-par-le-script-install-sh","link":"#les-parametres-positionnes-par-le-script-install-sh","children":[]},{"level":3,"title":"Les parammètres supplémentaires","slug":"les-parammetres-supplementaires","link":"#les-parammetres-supplementaires","children":[]}]}],"git":{"updatedTime":1733940169000,"contributors":[{"name":"Alain Abbas","email":"alain.abbas@libertech.fr","commits":4}]},"filePathRelative":"backends/backend_LDAP.md"}');export{o as comp,u as data};
